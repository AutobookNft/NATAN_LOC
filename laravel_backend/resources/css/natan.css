@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile Questions Drawer - Details Chevron Animation */
@layer utilities {
  details[open] .details-chevron {
    transform: rotate(180deg);
  }
  
  /* CRITICAL: Ensure mobile drawer is NEVER visible on desktop (xl breakpoint) */
  @media (min-width: 1280px) {
    #mobile-questions-drawer,
    #mobile-questions-overlay,
    #mobile-questions-toggle {
      display: none !important;
      visibility: hidden !important;
      pointer-events: none !important;
      opacity: 0 !important;
      z-index: -1 !important;
    }
  }
  
  /* Force drawer closed by default on ALL screen sizes - NEVER visible unless explicitly opened */
  #mobile-questions-drawer {
    transform: translateX(100%) !important;
    display: none !important;
  }
  
  /* Only show drawer on mobile when explicitly opened (not translate-x-full class) */
  @media (max-width: 1279px) {
    #mobile-questions-drawer.translate-x-full {
      transform: translateX(100%) !important;
      display: flex !important; /* Need flex for layout but still off-screen */
    }
    
    #mobile-questions-drawer:not(.translate-x-full):not(.hidden) {
      transform: translateX(0) !important;
      display: flex !important;
    }
  }
}

/* NATAN Base Styles - Mobile First */
@layer base {
  /* Typography defaults */
  body {
    font-family: system-ui, -apple-system, sans-serif;
    color: #374151;
    background-color: #f9fafb;
    font-size: 14px;
    line-height: 1.6;
  }

  h1, h2, h3, h4, h5, h6 {
    font-weight: 700;
    color: #111827;
  }

  h1 {
    font-size: 32px;
    line-height: 1.2;
    color: #0F1E36;
  }

  h2 {
    font-size: 24px;
    line-height: 1.3;
    color: #2D3748;
  }

  h3 {
    font-size: 20px;
    line-height: 1.4;
    color: #4A5568;
  }

  h4 {
    font-size: 18px;
    line-height: 1.5;
    color: #4A5568;
  }

  code {
    font-family: monospace;
    font-size: 0.875rem;
    color: #2D3748;
  }

  /* Accessibility improvements */
  :focus-visible {
    outline: 2px solid #1B365D;
    outline-offset: 2px;
  }

  button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

/* NATAN Components */
@layer components {
  /* URS Badges */
  .urs-badge {
    @apply inline-flex items-center gap-2 px-3 py-1.5 rounded-full font-bold text-sm font-mono;
  }

  .urs-badge-a {
    @apply inline-flex items-center gap-2 px-3 py-1.5 rounded-full font-bold text-sm font-mono bg-urs-a text-white border-2 border-emerald-600;
    box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);
  }

  .urs-badge-b {
    @apply inline-flex items-center gap-2 px-3 py-1.5 rounded-full font-bold text-sm font-mono bg-urs-b text-white border-2 border-blue-600;
    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
  }

  .urs-badge-c {
    @apply inline-flex items-center gap-2 px-3 py-1.5 rounded-full font-bold text-sm font-mono bg-urs-c text-white border-2 border-amber-600;
    box-shadow: 0 2px 4px rgba(245, 158, 11, 0.3);
  }

  .urs-badge-x {
    @apply inline-flex items-center gap-2 px-3 py-1.5 rounded-full font-bold text-sm font-mono bg-urs-x text-white border-2 border-red-600;
    box-shadow: 0 2px 4px rgba(239, 68, 68, 0.3);
  }

  /* Claim Containers */
  .claim-container {
    @apply p-4 rounded-lg border-2 shadow-sm;
  }

  .claim-container-a {
    @apply p-4 rounded-lg border-2 shadow-sm bg-emerald-50 border-emerald-200;
  }

  .claim-container-b {
    @apply p-4 rounded-lg border-2 shadow-sm bg-blue-50 border-blue-200;
  }

  .claim-container-c {
    @apply p-4 rounded-lg border-2 shadow-sm bg-amber-50 border-amber-200;
  }

  .claim-container-x {
    @apply p-4 rounded-lg border-2 shadow-sm bg-red-50 border-red-200;
  }

  /* Trust Badges */
  .trust-badge {
    @apply inline-flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-xs;
  }

  .zero-leak-badge {
    @apply inline-flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-xs text-white;
    background: linear-gradient(135deg, #0F4C75 0%, #1B365D 100%);
    border: 2px solid #2D5016;
  }

  .multi-tenant-badge {
    @apply inline-flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-xs bg-natan-blue-extra-light text-natan-blue-dark border border-natan-blue;
  }

  .verified-badge {
    @apply inline-flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-xs bg-natan-green-extra-light text-natan-green border border-natan-green;
  }

  .blockchain-badge {
    @apply inline-flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-xs text-white;
    background: linear-gradient(135deg, #2D5016 0%, #3D6B22 100%);
    border: 2px solid #B89968;
  }

  /* Institutional Buttons */
  .btn-primary {
    @apply inline-flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-semibold text-sm text-white bg-natan-blue transition-all;
    min-height: 44px; /* Touch target */
  }

  .btn-primary:hover {
    @apply bg-natan-blue-light;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(27, 54, 93, 0.2);
  }

  .btn-primary:disabled {
    @apply bg-natan-disabled cursor-not-allowed opacity-60;
    transform: none;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-semibold text-sm text-white bg-white text-natan-blue border border-natan-blue transition-all;
    min-height: 44px; /* Touch target */
  }

  .btn-secondary:hover {
    @apply bg-natan-blue-extra-light;
  }

  /* AI Message Content - Enterprise Grade Formatting */
  .message-content a {
    @apply text-natan-blue font-semibold underline;
    transition: color 0.2s ease;
  }

  .message-content a:hover {
    @apply text-natan-blue-light no-underline;
  }

  /* Tables - Professional Formatting */
  .message-content table {
    @apply w-full border-collapse my-6;
    font-size: 0.875rem;
  }

  .message-content thead {
    @apply bg-natan-gray-100 border-b-2 border-natan-blue;
  }

  .message-content thead th {
    @apply px-4 py-3 text-left font-bold text-natan-blue-dark uppercase tracking-wider text-xs;
  }

  .message-content tbody tr {
    @apply border-b border-natan-gray-300 transition-colors;
  }

  .message-content tbody tr:hover {
    @apply bg-natan-gray-50;
  }

  .message-content tbody td {
    @apply px-4 py-3 text-natan-gray-700;
    vertical-align: top;
  }

  .message-content tbody td:first-child {
    @apply font-semibold text-natan-gray-900;
  }

  .message-content tbody td a {
    @apply inline-block;
  }

  /* Lists - Better Spacing */
  .message-content ul {
    @apply space-y-3 my-4;
  }

  .message-content ul li {
    @apply leading-relaxed;
  }

  .message-content ol {
    @apply space-y-3 my-4;
  }

  .message-content ol li {
    @apply leading-relaxed;
  }

  /* Sources Section - Distinct Styling */
  .sources-section {
    @apply mt-8 pt-6 border-t-2 border-natan-gray-300;
  }

  .sources-section ul {
    @apply space-y-4;
  }

  .sources-section li {
    @apply leading-relaxed;
  }

  .sources-section a {
    @apply text-natan-blue font-bold underline text-base;
  }

  .sources-section a:hover {
    @apply text-natan-blue-light no-underline;
  }

  /* ===== NATAN PROJECTS COMPONENTS ===== */
  
  /* Button Styles */
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 inline-flex items-center justify-center;
  }

  .btn-primary {
    @apply bg-natan-blue text-white hover:bg-natan-blue-dark shadow-md hover:shadow-lg;
  }

  .btn-secondary {
    @apply bg-gray-200 text-gray-700 hover:bg-gray-300;
  }

  .btn-icon-sm {
    @apply p-2 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors;
  }

  /* Project Card */
  .project-card {
    @apply cursor-pointer transition-all duration-200;
  }

  .project-card:hover {
    @apply shadow-lg transform translate-y-[-2px];
  }

  /* Document Card */
  .document-card {
    @apply transition-shadow duration-200;
  }

  /* Upload Zone */
  #upload-dropzone {
    @apply transition-all duration-200;
  }

  #upload-dropzone:hover {
    @apply bg-blue-50;
  }

  /* Utility Classes */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .text-natan-dark {
    color: #0F1E36;
  }

  .bg-natan-blue-light {
    background-color: rgba(27, 54, 93, 0.1);
  }

  /* Processing Notice Animation */
  .processing-notice .animate-progress {
    animation: progress-grow 2s ease-in-out infinite alternate;
  }

  @keyframes progress-grow {
    0% { width: var(--progress-width, 0%); }
    100% { width: calc(var(--progress-width, 0%) + 5%); }
  }

  /* Processing Notice Pulse */
  .processing-notice {
    animation: notice-pulse 2s ease-in-out infinite;
  }

  @keyframes notice-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.85; }
  }
}



